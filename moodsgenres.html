<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <title>SSS - Search</title>
  <link rel="icon" href="media/etc/IMG_2701-removebg-preview.png">
  <style>
    @import url(style/STYLE_LIbrary.css);
    @import url(style/STYLE_sidebar.css);
    @import url(style/STYLE_Chatbot.css);
  </style>
  <link rel="stylesheet"href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0">
  <link rel="stylesheet"href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@48,400,1,0">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>

<body>

  <script type="importmap">
    {
      "imports": {
        "@google/generative-ai": "https://esm.run/@google/generative-ai"
      }
    }
  </script>

  <div class="sidebar">
    <div class="logo">
      <a href="home.html"><img src="media/etc/IMG_2701.JPG" alt="Logo" style="max-height: 130px;"></a><a href="composemain.html"><img src="media/etc/Design.png" alt="Logo" style="max-height: 75px; margin-bottom: 30px;"></a>
      <!-- ÏûëÍ≥° ÌååÌä∏Î°ú Ïù¥ÎèôÌïòÍ∏∞ ÏúÑÌïú Î°úÍ≥† (Î°úÍ≥† Î≥ÄÍ≤Ω Í∞ÄÎä•, Ï∂îÌõÑ ÏûëÍ≥°ÌååÌä∏ ÏôÑÏÑ± ÌõÑ Ïó∞Í≤∞) -->
    </div>
    <ul class="menu">
      <a href="home.html"><li><i class="fas fa-home"></i>Home</li></a>
      <a href="./searchtab.html"><li style="background-color: #222;"><i class="fas fa-search"></i>Search</li></a>
      <a href="./library.html#downloads"><li><i class="fas fa-book"></i>Library</li></a>
      <a href="settings.html#general"><li><i class="fas fa-cog"></i>Settings</li></a>
    </ul>
    <footer>¬© 2024 SoundSeaStudio</footer>
  </div>

  <div>
    <div style="padding-top: 30px;">
      <h1 style="margin: 0px 0px 30px 265px; display: inline;">Pop</h1>
      <h4 style="float: right; margin-right: 30px; display: inline;"><a href="login.html">Log in</a></h4>
      <!-- Ïò§Î•∏Ï™Ω Ï†ïÎ†¨ (text-align ÏçºÎäîÎç∞ ÏïàÎêòÏÑú Îî¥Í±∞ ÏîÄ), ÎÑàÎ¨¥ Ïò§Î•∏Ï™ΩÏóê Î∂ôÏñ¥ÏÑú ÎßàÏßÑ Ï§å. Ï∂îÌõÑ Î°úÍ∑∏Ïù∏ ÌéòÏù¥ÏßÄÏôÄ Ïó∞Í≤∞-->
      <h4 style="float: right; margin-right: 20px; display: inline;"><a href="signup.html">Sign up</a></h4>
      <!-- h1, h4 Îëê ÌÉúÍ∑∏Îäî ÏõêÎûò Ï§ÑÎ∞îÍøàÏù¥ ÎêòÏßÄÎßå Í∞ôÏùÄ Ïó¥Ïóê ÏûàÏñ¥Ïïº ÌïòÎØÄÎ°ú display: inline; ÏÜçÏÑ± ÏÇ¨Ïö©Ìï®ÏúºÎ°úÏç® Í∞ôÏùÄ Ïó¥Ïóê ÌëúÏãú -->
    </div>
    <!-- ÏúÑÏ™ΩÍ≥º ÏïÑÎûòÏôÄ ÏôºÏ™Ω(ÏÇ¨Ïù¥ÎìúÎ∞î ÎÑìÏù¥Î≥¥Îã§ Îçî ÌÅ¨Í≤å) ÏïåÎßûÍ≤å ÎßàÏßÑÏùÑ Ï§å -->
  </div>
  <div class="ssidebar">
    <!-- ÏÑ†ÌÉùÏãú Í∞Å Î∂ÄÎ∂ÑÏúºÎ°ú Ïù¥ÎèôÌïòÎäî Î©îÎâ¥Î∞î -->
    <ul>
      <li><a href="#familiar">
          <h4 style="margin: 50px 0px 0px 265px;">FAMILIAR</h4>
        </a></li>
        <li><a href="#discover">
          <h4 style="margin: 50px 0px 0px 20px;">DISCOVER</h4>
        </a></li>
    </ul>
  </div>
  <div class="content" id="familiar">

    <h2>Featured Albums</h2>

    <div class="album">
      <a href="album.html"><img src="media/album/IMG_2027.JPG" alt="Lover-Taylor Swift" class="albumart"></a>
      <a href="album.html"><div class="album-title">Lover</div></a>
      <a href="singer.html"><div class="album-artist">Taylor Swift</div></a>
    </div>

    <div class="album">
      <a href="album.html"><img src="media/album/IMG_2030.PNG" alt="GUTS-Oliva Rodrigo" class="albumart"></a>
      <a href="album.html"><div class="album-title">GUTS</div></a>
      <a href="singer.html"><div class="album-artist">Oliva Rodrigo</div></a>
    </div>

    <div class="album">
      <a href="album.html"><img src="media/album/IMG_2039.JPG" alt="x (Deluxe Edition)-Ed Sheeran" class="albumart"></a>
      <a href="album.html"><div class="album-title">x (Deluxe Edition)</div></a>
      <a href="singer.html"><div class="album-artist">Ed Sheeran</div></a>
    </div>

    <div class="album">
      <a href="album.html"><img src="media/album/Shake It Off.jpg" alt="Shake It Off-Taylor Swift" class="albumart"></a>
      <a href="album.html"><div class="album-title">Shake It Off</div></a>
      <a href="singer.html"><div class="album-artist">Taylor Swift</div></a>
    </div>
    
    <div class="album">
      <a href="album.html"><img src="media/album/IMG_2049.JPG" alt="Divinely Uninspired To A Hellish Extent-Lewis Capaldi" class="albumart"></a>
      <a href="album.html"><div class="album-title">Divinely Uninspired To A Hellish Extent</div></a>
      <a href="singer.html"><div class="album-artist">Lewis Capaldi</div></a>
    </div>

    <div class="album">
      <a href="album.html"><img src="media/album/Midnights (3am Edition).jpg" alt="Midnights (3am Edition)-Taylor Swift" class="albumart"></a>
      <a href="album.html"><div class="album-title">Midnights (3am Edition)</div></a>
      <a href="singer.html"><div class="album-artist">Taylor Swift</div></a>
    </div>
    
    <div class="album">
      <a href="album.html"><img src="media/album/IMG_2059.JPG" alt="After Hours-The Weeknd" class="albumart"></a>
      <a href="album.html"><div class="album-title">After Hours</div></a>
      <a href="singer.html"><div class="album-artist">The Weeknd</div></a>
    </div>

    <div class="album">
      <a href="album.html"><img src="media/album/Fearless (Platinum Edition).jpg" alt="Fearless : The Kissing In The Rain Chapter-Taylor Swift" class="albumart"></a>
      <a href="album.html"><div class="album-title">Fearless : The Kissing In The Rain Chapter</div></a>
      <a href="singer.html"><div class="album-artist">Taylor Swift</div></a>
    </div>
        
    <div class="album">
      <a href="album.html"><img src="media/album/IMG_2069.JPG" alt="My Everything (Deluxe)-Ariana Grande" class="albumart"></a>
      <a href="album.html"><div class="album-title">My Everything (Deluxe)</div></a>
      <a href="singer.html"><div class="album-artist">Ariana Grande</div></a>
    </div>
    
    <div class="album">
      <a href="album.html"><img src="media/album/IMG_2079.JPG" alt="Future Nostalgia-Dua Lipa" class="albumart"></a>
      <a href="album.html"><div class="album-title">Future Nostalgia</div></a>
      <a href="singer.html"><div class="album-artist">Dua Lipa</div></a>
    </div>
    
    <div class="album">
      <a href="album.html"><img src="media/album/IMG_2089.JPG" alt="Love Goes-Sam Smith" class="albumart"></a>
      <a href="album.html"><div class="album-title">Love Goes</div></a>
      <a href="singer.html"><div class="album-artist">Sam Smith</div></a>
    </div>

    <div class="album">
      <a href="album.html"><img src="media/album/1989.jpg" alt="1989 (Taylor's Version)-Taylor Swift" class="albumart"></a>
      <a href="album.html"><div class="album-title">1989 (Taylor's Version)</div></a>
      <a href="singer.html"><div class="album-artist">Taylor Swift</div></a>
    </div>

    <div class="album">
      <a href="album.html"><img src="media/album/IMG_2029.JPG" alt="AUSTIN-Post Malone" class="albumart"></a>
      <a href="album.html"><div class="album-title">AUSTIN</div></a>
      <a href="singer.html"><div class="album-artist">Post Malone</div></a>
    </div>

    <div class="album">
      <a href="album.html"><img src="media/album/Speak Now (Taylor's Version).jpg" alt="Speak Now (Taylor's Version)-Taylor Swift" class="albumart"></a>
      <a href="album.html"><div class="album-title">Speak Now (Taylor's Version)</div></a>
      <a href="singer.html"><div class="album-artist">Taylor Swift</div></a>
    </div>

  </div>

  <div class="content" id="discover">

    <h2>Featured Albums</h2>

    <div class="album">
      <a href="album.html"><img src="./media/album/newjeans.jpg" alt="Hot Sweet-New Jeans" class="albumart"></a>
      <a href="album.html"><div class="album-title">Hot Sweet</div></a>
      <a href="singer.html"><div class="album-artist">New Jeans</div></a>
    </div>

    <div class="album">
      <a href="album.html"><img src="./media/album/QWER.jpg" alt="MANITO-QWER" class="albumart"></a>
      <a href="album.html"><div class="album-title">MANITO</div></a>
      <a href="singer.html"><div class="album-artist">QWER</div></a>
    </div>

    <div class="album">
      <a href="album.html"><img src="./media/album/Maroon 5_Overexposed.jpg" alt="Overexposed-Maroon 5" class="albumart"></a>
      <a href="album.html"><div class="album-title">Overexposed</div></a>
      <a href="singer.html"><div class="album-artist">Maroon 5</div></a>
    </div>

    <div class="album">
      <a href="album.html"><img src="./media/album/Jungkook_Golden.jpg" alt="Golden-Jungkook" class="albumart"></a>
      <a href="album.html"><div class="album-title">Golden</div></a>
      <a href="singer.html"><div class="album-artist">Jungkook</div></a>
    </div>

    <div class="album">
      <a href="album.html"><img src="./media/album/Beenzino_24;26.jpg" alt="24;26-Beenzino" class="albumart"></a>
      <a href="album.html"><div class="album-title">24;26</div></a>
      <a href="singer.html"><div class="album-artist">Beenzino</div></a>
    </div>

    <div class="album">
      <a href="album.html"><img src="./media/album/Miley Cyrus_Flowers.jpg" alt="Flowers-Miley Cyrus" class="albumart"></a>
      <a href="album.html"><div class="album-title">Flowers</div></a>
      <a href="singer.html"><div class="album-artist">Miley Cyrus</div></a>
    </div>

    <div class="album">
      <a href="album.html"><img src="./media/album/New Jeans_New Jeans.jpg" alt="New Jeans-New Jeans" class="albumart"></a>
      <a href="album.html"><div class="album-title">New Jeans</div></a>
      <a href="singer.html"><div class="album-artist">New Jeans</div></a>
    </div>

    <div class="album">
      <a href="album.html"><img src="./media/album/Illit_Super Real Me.png" alt="Super Real Me-Illit" class="albumart"></a>
      <a href="album.html"><div class="album-title">Super Real Me</div></a>
      <a href="singer.html"><div class="album-artist">Illit</div></a>
    </div>

    <div class="album">
      <a href="album.html"><img src="./media/album/aespa_Armageddon.jpg" alt="Armageddon-aespa" class="albumart"></a>
      <a href="album.html"><div class="album-title">Armageddon</div></a>
      <a href="singer.html"><div class="album-artist">aespa</div></a>
    </div>

    <div class="album">
      <a href="album.html"><img src="./media/album/Andy Grammer_Magazines Or Novels.jpg" alt="Magazines Or Novels-Andy Grammer" class="albumart"></a>
      <a href="album.html"><div class="album-title">Magazines Or Novels</div></a>
      <a href="singer.html"><div class="album-artist">Andy Grammer</div></a>
    </div>

    <div class="album">
      <a href="album.html"><img src="./media/album/Heize_Happen.jpg" alt="Happen-Heize" class="albumart"></a>
      <a href="album.html"><div class="album-title">Happen</div></a>
      <a href="singer.html"><div class="album-artist">Heize</div></a>
    </div>

    <div class="album">
      <a href="album.html"><img src="./media/album/Psy_Ssa Da 9.jpg" alt="Ssa Da 9-Psy" class="albumart"></a>
      <a href="album.html"><div class="album-title">Ssa Da 9</div></a>
      <a href="singer.html"><div class="album-artist">Psy</div></a>
    </div>

    <div class="album">
      <a href="album.html"><img src="./media/album/V_Layover.png" alt="Layover-V" class="albumart"></a>
      <a href="album.html"><div class="album-title">Layover</div></a>
      <a href="singer.html"><div class="album-artist">V</div></a>
    </div>

  </div>

  <!-- Ï±óÎ¥á html -->

  <button class="chatbot-toggler">
    <span class="material-symbols-rounded" style="margin-left: 8px;">mode_comment</span>
    <h4 style="margin-left: 40px;">Assistant</h4>
    <span class="material-symbols-outlined">close</span>
  </button>
  <div class="chatbot">
    <a href="easteregg.html">
      <header>
        <h2>Assistant</h2>
        <p>Powered by Gemini</p>
        <span class="close-btn material-symbols-outlined">close</span>
      </header>
    </a>
    <a href="easteregg.html">
      <ul class="chatbox">
        <li class="chat incoming">
          <span class="material-symbols-outlined">smart_toy</span>
          <p>Hi there üëã<br>How can I help you today?</p>
        </li>
      </ul>
    </a>
    <div class="chat-input">
      <textarea placeholder="Enter a message..." spellcheck="false" required></textarea>
      <span id="send-btn" class="material-symbols-rounded">send</span>
    </div>
  </div>

  <!-- Ï±óÎ¥á Ïä§ÌÅ¨Î¶ΩÌä∏ -->
  <script type="module">
    // Google Generative AI ÎùºÏù¥Î∏åÎü¨Î¶¨ Í∞ÄÏ†∏Ïò§Í∏∞
    import { GoogleGenerativeAI } from "@google/generative-ai";
    
    // Generative AI Ï¥àÍ∏∞Ìôî Î∞è API ÌÇ§ ÏÑ§Ï†ï
    const genAI = new GoogleGenerativeAI('AIzaSyAUOyuSGwGGOp_YTo1xjLoXt6DgXw8jh7A');

    // Ï±óÎ¥á Í∏∞Îä•Ïóê ÌïÑÏöîÌïú DOM ÏöîÏÜå ÏÑ†ÌÉù
    const chatbotToggler = document.querySelector(".chatbot-toggler"); // Ï±óÎ¥á ÌÜ†Í∏Ä Î≤ÑÌäº
    const closeBtn = document.querySelector(".close-btn"); // Ï±óÎ¥á Îã´Í∏∞ Î≤ÑÌäº
    const chatbox = document.querySelector(".chatbox"); // Ï±ÑÌåÖ Î©îÏãúÏßÄÎ•º ÌëúÏãúÌïòÎäî ÏòÅÏó≠
    const chatInput = document.querySelector(".chat-input textarea"); // ÏÇ¨Ïö©Ïûê ÏûÖÎ†•ÎûÄ
    const sendChatBtn = document.querySelector(".chat-input span"); // Î©îÏãúÏßÄ Ï†ÑÏÜ° Î≤ÑÌäº

    // ÏÇ¨Ïö©Ïûê Î©îÏãúÏßÄ Ï†ÄÏû• Î≥ÄÏàò Î∞è ÏûÖÎ†•ÎûÄ Ï¥àÍ∏∞ ÎÜíÏù¥ Ï†ÄÏû•
    let userMessage = null;
    const inputInitHeight = chatInput.scrollHeight;

    // ÏÇ¨Ïö©ÏûêÍ∞Ä ÏûÖÎ†•Ìïú Î©îÏãúÏßÄÎ°ú Î™®Îç∏ Ïã§Ìñâ
    async function runModel(prompt) {
        const model = genAI.getGenerativeModel({ model: "gemini-pro"}); // Î™®Îç∏ Í∞ÄÏ†∏Ïò§Í∏∞
      
        // ÏÇ¨Ïö©Ïûê Î©îÏãúÏßÄÎ°ú ÏΩòÌÖêÏ∏† ÏÉùÏÑ±
        const result = await model.generateContent(prompt);
        const response = await result.response;
        const text = response.text();
        return (text); // ÏÉùÏÑ±Îêú ÌÖçÏä§Ìä∏ Î∞òÌôò
    }
    
    // Ï±ÑÌåÖ Î©îÏãúÏßÄ Î¶¨Ïä§Ìä∏ Ìï≠Î™© ÏÉùÏÑ±
    const createChatLi = (message, className) => {
        const chatLi = document.createElement("li"); // ÏÉàÎ°úÏö¥ Î¶¨Ïä§Ìä∏ Ìï≠Î™© ÏÉùÏÑ±
        chatLi.classList.add("chat", `${className}`); // ÌÅ¥ÎûòÏä§ Ï∂îÍ∞Ä
        // Î©îÏãúÏßÄ ÌÉÄÏûÖÏóê Îî∞Îùº ÎÇ¥Ïö© ÏÑ§Ï†ï
        let chatContent = className === "outgoing" ? `<p></p>` : `<span class="material-symbols-outlined">smart_toy</span><p></p>`;
        chatLi.innerHTML = chatContent; // HTML ÏÑ§Ï†ï
        chatLi.querySelector("p").textContent = message; // Î©îÏãúÏßÄ ÎÇ¥Ïö© ÏÑ§Ï†ï
        return chatLi; // Î¶¨Ïä§Ìä∏ Ìï≠Î™© Î∞òÌôò
    }

    // Ï±óÎ¥á ÏùëÎãµ ÏÉùÏÑ±
    const generateResponse = async (chatElement, userMessage) => {
        const messageElement = chatElement.querySelector("p");
        try {
            const answer = await runModel(userMessage); // Î™®Îç∏ Ïã§ÌñâÌïòÏó¨ ÏùëÎãµ ÏÉùÏÑ±
            messageElement.textContent = answer; // ÏùëÎãµ ÎÇ¥Ïö© ÏÑ§Ï†ï
        } catch (error) {
            // Ïò§Î•ò Ï≤òÎ¶¨
            console.error("Failed to generate response;", error);
            messageElement.textContent = "Sorry, something went wrong."; // Ïò§Î•ò Î©îÏãúÏßÄ ÌëúÏãú
        }
        chatbox.scrollTo(0, chatbox.scrollHeight); // Ï±ÑÌåÖ Î∞ïÏä§Î•º ÏµúÏã† Î©îÏãúÏßÄÎ°ú Ïä§ÌÅ¨Î°§
    }

    // Ï±ÑÌåÖ Ï≤òÎ¶¨
    const handleChat = () => {
        userMessage = chatInput.value.trim(); // ÏÇ¨Ïö©Ïûê ÏûÖÎ†• Î©îÏãúÏßÄ Í∞ÄÏ†∏Ïò§Í∏∞
        if(!userMessage) return; // Î©îÏãúÏßÄÍ∞Ä ÎπÑÏñ¥ÏûàÏúºÎ©¥ Î∞òÌôò
        
        // ÏûÖÎ†•ÎûÄ Ï¥àÍ∏∞Ìôî Î∞è ÎÜíÏù¥ Ïû¨ÏÑ§Ï†ï
        chatInput.value = "";
        chatInput.style.height = `${inputInitHeight}px`;

        // ÏÇ¨Ïö©Ïûê Î©îÏãúÏßÄÎ•º Ï±ÑÌåÖ Î∞ïÏä§Ïóê Ï∂îÍ∞Ä
        chatbox.appendChild(createChatLi(userMessage, "outgoing"));
        chatbox.scrollTo(0, chatbox.scrollHeight);

        setTimeout(() => {
            // ÏùëÎãµÏùÑ Í∏∞Îã§Î¶¨Îäî ÎèôÏïà "Thinking..." Î©îÏãúÏßÄ ÌëúÏãú
            const incomingChatLi = createChatLi("Thinking...", "incoming");
            chatbox.appendChild(incomingChatLi);
            chatbox.scrollTo(0, chatbox.scrollHeight);
            generateResponse(incomingChatLi, userMessage); // ÏùëÎãµ ÏÉùÏÑ± Ìï®Ïàò Ìò∏Ï∂ú
        }, 0); // ÏùëÎãµ ÏÉùÏÑ± ÏßÄÏó∞ÏãúÍ∞Ñ ÏÑ§Ï†ï
    }

    // ÏûÖÎ†•ÎûÄ ÎÇ¥Ïö© Í∏∏Ïù¥Ïóê Îî∞Îùº ÎÜíÏù¥ Ï°∞Ï†à
    chatInput.addEventListener("input", () => {
        chatInput.style.height = `${inputInitHeight}px`; // Ï¥àÍ∏∞ ÎÜíÏù¥Î°ú Ïû¨ÏÑ§Ï†ï
        chatInput.style.height = `${chatInput.scrollHeight}px`; // ÏÉàÎ°úÏö¥ ÎÇ¥Ïö©Ïóê ÎßûÍ≤å ÎÜíÏù¥ Ï°∞Ï†à
    });

    // Enter ÌÇ§Î•º ÎàåÎü¨ Ï±ÑÌåÖ Ï≤òÎ¶¨
    chatInput.addEventListener("keydown", (e) => {
        if(e.key === "Enter" && !e.shiftKey && window.innerWidth > 800) { // Shift ÌÇ§Î•º ÎàÑÎ•¥ÏßÄ ÏïäÍ≥† Enter ÌÇ§Î•º ÎàåÎ†ÄÏúºÎ©∞ Ï∞Ω ÎÑàÎπÑÍ∞Ä 800px Ïù¥ÏÉÅÏù∏ Í≤ΩÏö∞
            e.preventDefault(); // Í∏∞Î≥∏ Enter ÌÇ§ ÎèôÏûë Î∞©ÏßÄ
            handleChat(); // Ï±ÑÌåÖ Ï≤òÎ¶¨ Ìï®Ïàò Ìò∏Ï∂ú
        }
    });

    // Ï†ÑÏÜ° Î≤ÑÌäº ÌÅ¥Î¶≠ Ïãú Ï±ÑÌåÖ Ï≤òÎ¶¨
    sendChatBtn.addEventListener("click", handleChat);

    // Îã´Í∏∞ Î≤ÑÌäº ÌÅ¥Î¶≠ Ïãú Ï±óÎ¥á Îã´Í∏∞
    closeBtn.addEventListener("click", () => document.body.classList.remove("show-chatbot"));

    // ÌÜ†Í∏Ä Î≤ÑÌäº ÌÅ¥Î¶≠ Ïãú Ï±óÎ¥á ÌëúÏãú/Ïà®Í∏∞Í∏∞ ÌÜ†Í∏Ä
    chatbotToggler.addEventListener("click", () => document.body.classList.toggle("show-chatbot"));

</script>


</body>

</html>